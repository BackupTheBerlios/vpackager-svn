' Gambas class file

'    This file is part of vpackager

'    vpackager is free software: you can redistribute it and/or modify
'    it under the terms of the GNU General Public License as published by
'    the Free Software Foundation, either version 3 of the License, or
'    (at your option) any later version.

'    vpackager  is distributed in the hope that it will be useful,
'    but WITHOUT ANY WARRANTY; without even the implied warranty of
'    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
'    GNU General Public License for more details.

'    You should have received a copy of the GNU General Public License
'    along with vpackager.  If not, see <http://www.gnu.org/licenses/>.



PUBLIC fRetTo AS Form ' form to return to. Defaults to settings

PUBLIC SUB Form_Open()

  ME.LIST_OPTIONS()
  ME.Center
END

PUBLIC SUB LIST_OPTIONS()
  
  DIM sFound AS String
  FOR EACH sFound IN RDir("/usr/bin/", "*qmake*")
    
      IF ME.cbqmakes.Find(sFound) = -1 THEN 
        ME.cbqmakes.Add(Trim("/usr/bin/" &/ sFound))
     
    END IF
  NEXT 
  
END

PUBLIC SUB obOK_Click()

  CSettings.sQmakePath = Trim(ME.cbqmakes.Text)
  FSettings.txtQmakePath.Text = CSettings.sQmakePath
  ME.Close
    IF fRetTo THEN 
      fRetTo.Show
    ELSE 
      FSettings.Show
    END IF  

END

PUBLIC SUB btCancel_Click()

  ME.Close
  IF fRetTo THEN 
  fRetTo.Show
  ELSE 
  FSettings.Show
  END IF
  
END


PUBLIC SUB Form_Close()

  IF fRetTo THEN 
    fRetTo.Show
  ELSE 
  FSettings.Show
  END IF
  

END
